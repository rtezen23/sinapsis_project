generator client {
  provider = "prisma-client-js" // se agregó "-js" (recomendado en proyectos nuevos y que usan js en vez de ts)
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

/*  Creando schema (con prisma db pull para que lo cree en base a nuestra base de datos de MySQL)
    El nombre de los modelos está en plural porque así están definidas las tablas de la BD, aunque
    se recomienda manejarlo en singular por buenas prácticas
*/

model campaigns {
  id             Int        @id @default(autoincrement())
  user_id        Int?
  name           String?    @db.VarChar(50)
  process_date   DateTime?  @db.Date
  process_hour   DateTime?  @db.Time(0)
  total_records  Int?
  total_sent     Int?       @default(0)
  total_error    Int?       @default(0)
  process_status Int?
  final_hour     DateTime?  @db.Time(0)
  users          users?     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "campaigns_ibfk_1")
  messages       messages[]

  @@index([user_id], map: "user_id")
}

model customers {
  id      Int      @id @default(autoincrement())
  name    String?  @db.VarChar(250)
  deleted Boolean? @default(false)
  users   users[]
}

model messages {
  id              Int        @id @default(autoincrement())
  campaign_id     Int?
  phone           String?    @db.VarChar(10)
  text            String?    @db.VarChar(160)
  shipping_status Int?       @default(1) @db.TinyInt
  shipping_hour   DateTime?  @db.Time(0)
  campaigns       campaigns? @relation(fields: [campaign_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "messages_ibfk_1")

  @@index([campaign_id], map: "campaign_id")
}

model users {
  id          Int         @id @default(autoincrement())
  customer_id Int?
  username    String?     @db.VarChar(50)
  deleted     Boolean?    @default(false)
  campaigns   campaigns[]
  customers   customers?  @relation(fields: [customer_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "users_ibfk_1")

  @@index([customer_id], map: "customer_id")
}
